<div class="message" [ngClass]="{'current-user': (user.id == currentUserID)}">
    <img class="avatar" src="./assets/img/avatars/{{ user.avatar }}.svg" alt="" (click)="openShowUserDialog(user)" />

    <div class="details">
        <!-- Message Info or Edit options -->
        @if (!editMsg) {
        <div class="name-timestamp">
            <h3 (click)="openShowUserDialog(user)">{{ user.name }}</h3>
            <span>{{ setTime(msg.date) }} Uhr</span>
        </div>
        <mat-card class="message-card">
            <mat-card-content>{{ msg.message }}</mat-card-content>
        </mat-card>
        @if(channelMsg && replaies.length > 0){
        <div class="reply">
            <a (click)="setThreadOutput()">{{ replaies.length }} Antworten</a>
            <span>Letzte Antwort {{ setTime(replaies[replaies.length-1].date) }}</span>
        </div>
        }
        }
        @else {
        <div class="edit">
            <textarea #msgText class="edit-text" cols="30" rows="3"></textarea>
            <div class="edit-bottom">
                <mat-icon class="action-btn">add_reaction</mat-icon>
                <div class="btn-area">
                    <div class="delet-btn">
                        <button mat-fab extended color="primary" [disabled]="">LÃ¶schen</button>
                    </div>
                    <div class="cancle-btn">
                        <button mat-fab extended color="primary" (click)="toggleEditMsg()" [disabled]="">Abbrechen</button>
                    </div>
                    <div class="safe-btn">
                        <button mat-fab extended color="primary">Speichern</button>
                    </div>
                </div>
            </div>
        </div>
        }

    </div>

    <!-- Slidin Emoji options -->
    @if(!editMsg){
    <mat-card class="emoji-popup">
        <mat-card-content>
            @if (channelMsg) {
            <mat-icon class="action-btn">add_reaction</mat-icon>
            <mat-icon class="action-btn" (click)="setThreadOutput()">comment</mat-icon>
            @if (editPossible()){
            <mat-icon class="action-btn" (click)="toggleEditMsg()">more_vert</mat-icon>
            }
            } @else {
            <mat-icon class="action-btn">add_reaction</mat-icon>
            }
        </mat-card-content>
    </mat-card>
    }
</div>